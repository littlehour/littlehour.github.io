<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>easyui</title>
    <link rel="stylesheet" type="text/css" href="themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="themes/icon.css">
    <link rel="stylesheet" type="text/css" href="css/demo.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.easyui.min.js"></script>
</head>
<body>
    <div class="easyui-tabs" id="tabs" style="width:100%;height:920px;">
        <div title="First Tab" style="padding:10px">
            <h2 style="text-align:center">新闻管理</h2>
            <!-- <table id="tt" class="easyui-datagrid" style="width:90%;height:auto" rownumbers="true" pagination="true" pagePosition="bottom" toolbar="#tb"> -->
            <table id="tt" class="easyui-datagrid" style="width:90%;height:auto">
                <!-- <thead>
                    <tr>
                        <th field="name1" width="16%" sortable="true">Col 1</th>
                        <th field="name2" width="16%" sortable="true">Col 2</th>
                        <th field="name3" width="16%" sortable="true">Col 3</th>
                        <th field="name4" width="16%" sortable="true">Col 4</th>
                        <th field="name5" width="16%" sortable="true">Col 5</th>
                        <th field="name6" width="16%" sortable="true">Col 6</th>
                    </tr>                          
                </thead>                            -->
                <tbody>                            
                    <tr>                           
                        <td>Data 1</td>            
                        <td>Data 2</td>            
                        <td>Data 3</td>            
                        <td>Data 4</td>            
                        <td>Data 5</td>            
                        <td>Data 6</td>            
                    </tr>                          
                    <tr>                           
                        <td>Data 1</td>            
                        <td>Data 2</td>            
                        <td>Data 3</td>            
                        <td>Data 4</td>            
                        <td>Data 5</td>            
                        <td>Data 6</td>            
                    </tr>                          
                    <tr>                           
                        <td>Data 1</td>            
                        <td>Data 2</td>            
                        <td>Data 3</td>            
                        <td>Data 4</td>            
                        <td>Data 5</td>            
                        <td>Data 6</td>            
                    </tr>                          
                    <tr>                           
                        <td>Data 1</td>            
                        <td>Data 2</td>            
                        <td>Data 3</td>            
                        <td>Data 4</td>            
                        <td>Data 5</td>            
                        <td>Data 6</td>            
                    </tr>                          
                </tbody>                           
            </table>
        </div>
        <div title="Second Tab" style="padding:10px;">
            Second Tab
        </div>
        <div title="Third Tab" style="padding:10px;">
            Third Tab
        </div>
    </div>

    <div id="tb" style="padding:3px">
        <div style="margin-bottom:5px">
            <!-- <div class="left">
                <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true"></a>
                <a href="#" class="easyui-linkbutton" iconCls="icon-edit" plain="true"></a>
                <a href="#" class="easyui-linkbutton" iconCls="icon-save" plain="true"></a>
                <a href="#" class="easyui-linkbutton" iconCls="icon-cut" plain="true"></a>
                <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true"></a>
            </div>
            <div class="right"> -->
                <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true"></a>
                <span>Item ID:</span>
                <input id="itemid" style="line-height:26px;border:1px solid #ccc">
                <span>Product ID:</span>
                <input id="productid" style="line-height:26px;border:1px solid #ccc">
                <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">Search</a>
            <!-- </div> -->
        </div>
        <!-- <div style="margin-bottom:5px">
            <span>Item ID:</span>
            <input id="itemid" style="line-height:26px;border:1px solid #ccc">
            <span>Product ID:</span>
            <input id="productid" style="line-height:26px;border:1px solid #ccc">
            <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">Search</a>
        </div> -->
    </div>

    <script type="text/javascript">
        function doSearch(){
            $('#tt').datagrid('load',{
                itemid: $('#itemid').val(),
                productid: $('#productid').val()
            });
        };
        
         function updateActions(index){
            $('#tt').datagrid('updateRow',{
                index: index,
                row:{}
            });
        };

        function getRowIndex(target){
            var tr = $(target).closest('tr.datagrid-row');
            return parseInt(tr.attr('datagrid-row-index'));
        }
        function editrow(target){
            $('#tt').datagrid('beginEdit', getRowIndex(target));
        }
        function deleterow(target){
            $.messager.confirm('Confirm','Are you sure?',function(r){
                if (r){
                    $('#tt').datagrid('deleteRow', getRowIndex(target));
                }
            });
        }
        function saverow(target){
            $('#tt').datagrid('endEdit', getRowIndex(target));
        }
        function cancelrow(target){
            $('#tt').datagrid('cancelEdit', getRowIndex(target));
        }
        $(function(){
            $('#tabs').tabs({
                tabPosition:'left'
            });

            $('#tt').datagrid({
                // iconCls:'icon-edit',
                width:'90%',
                height:'auto',
                singleSelect:true,
                idField:'itemid',
                // url:'datagrid_data.json',
                rownumbers:true,
                pagination:true,
                pagePosition:'bottom',
                toolbar:'#tb',
                columns:[[
                    {field:'itemid',title:'Item ID',hidden:true},
                    {field:'name1',title:'name1',width:'16%',sortable:true},
                    {field:'name2',title:'name2',width:'16%',sortable:true},
                    {field:'name3',title:'name3',width:'16%',sortable:true},
                    {field:'name4',title:'name4',width:'16%',sortable:true},
                    {field:'name5',title:'name5',width:'16%',sortable:true},
                    // {field:'name6',title:'name6',width:'16%',sortable:true},
                    // {field:'listprice',title:'List Price',width:80,align:'right',editor:{type:'numberbox',options:{precision:1}}},
                    // {field:'unitcost',title:'Unit Cost',width:80,align:'right',editor:'numberbox'},
                    // {field:'attr1',title:'Attribute',width:150,editor:'text'},
                    // {field:'status',title:'Status',width:50,align:'center',
                    //     editor:{
                    //         type:'checkbox',
                    //         options:{
                    //             on: 'P',
                    //             off: ''
                    //         }
                    //     }
                    // },
                    {field:'action',title:'Action',width:'16%',align:'center',
                        formatter:function(value,row,index){
                            if (row.editing){
                                var s = '<a href="#" onclick="saverow(this)">Save</a> ';
                                var c = '<a href="#" onclick="cancelrow(this)">Cancel</a>';
                                return s+c;
                            } else {
                                var e = '<a href="#" onclick="editrow(this)">Edit</a> ';
                                var d = '<a href="#" onclick="deleterow(this)">Delete</a>';
                                return e+d;
                            }
                        }
                    }
                ]],
                onBeforeEdit:function(index,row){
                    row.editing = true;
                    updateActions(index);
                },
                onAfterEdit:function(index,row){
                    row.editing = false;
                    updateActions(index);
                },
                onCancelEdit:function(index,row){
                    row.editing = false;
                    updateActions(index);
                }
            });
        })
    </script>
</body>
</html>


app.use('/newsOperation',newsOperation);
var newsOperation=require('./routes/admin/newsOperation');